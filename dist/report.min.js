!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ROReport=t()}(this,function(){"use strict";var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function c(e,t){if(e.map)return e.map(t);for(var o=[],n=0;n<e.length;n++)o.push(t(e[n],n));return o}var u=Object.keys||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(o);return t};function o(e){if(window.localStorage)return localStorage.getItem(e);var t=document.cookie.match(new RegExp("(?:^|;\\s)"+e+"=(.*?)(?:;\\s|$)"));return t&&2<=t.length?t[1]:""}return function(){function e(){this.options={reportUser:!1,reportDevice:!1,reportDeviceOn:"manual"},this.userContext={},this.deviceInfo={}}return e.prototype.init=function(){var e=this.userContext;if(e.anonymousId=o("ro_report_anonymous_id"),e.id=o("ro_report_user_id"),!e.anonymousId&&!e.id){var t=function(e,t){void 0===t&&(t="abcdefghijklmnopqrstuvwxyz");for(var o="",n=0;n<e;n++)o+=t[Math.floor(Math.random()*t.length)];return o}(5)+(new Date).valueOf();!function(e,t,o){if(window.localStorage)try{o?localStorage.setItem(e,t):sessionStorage.setItem(e,t)}catch(e){}else{var n=window.location.host,r=n.split(".");2<r.length&&(n=({"com.cn":1,"js.cn":1,"net.cn":1,"gov.cn":1,"com.hk":1,"co.nz":1}[r.slice(-2).join(".")]?r.slice(-3):r.slice(-2)).join(".")),document.cookie=e+"="+t+";path=/;domain="+n+(o?";expires="+o:"")}}("ro_report_anonymous_id",t,"Sun, 18 Jan 2038 00:00:00 GMT;"),e.anonymousId=t}this.options.reportDevice&&this.setDeviceInfo("width",""+window.innerWidth)},e.prototype.setUserContext=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++){var n=t[o];this.userContext[n]=e[n]}},e.prototype.setDeviceInfo=function(e,t){this.deviceInfo[e]=t},e.prototype.report=function(e){var o,n,r,t;this.options.url&&(e.uid=this.options.reportUser&&this.userContext.id?this.userContext.id:this.userContext.anonymousId,(new Image).src=this.options.url+"?"+(n=n||"&",r=r||"=",null===(o=e)&&(o=void 0),"object"==typeof o?c(u(o),function(e){var t=encodeURIComponent(s(e))+r;return i(o[e])?c(o[e],function(e){return t+encodeURIComponent(s(e))}).join(n):t+encodeURIComponent(s(o[e]))}).join(n):t?encodeURIComponent(s(t))+r+encodeURIComponent(s(o)):""))},e.prototype.reportDevice=function(){this.report(this.deviceInfo)},e.prototype.installLibFlexibleFontSizeReport=function(){var t=this,o=null,e={flexible:{rem:null}};Object.defineProperty(e.flexible,"rem",{get:function(){return o},set:function(e){t.setDeviceInfo("fontSize",e),o=e}}),window.lib=e},e}()});
